{% extends "base.html" %}

{% block content %}
<h1>{{title}}</h1>
<div class="row">
    <div class="col-5">
        <div class="media">
            <img src="{{user.avatar}}" class="mr-3" alt="Аватар" height="128px">
            <ul class="list-group">
                <li class="list-group-item disabled" aria-disabled="true"><h3>{{user.name}}</h3></li>
                <li class="list-group-item">Email: {{user.email}}</li>
                <li class="list-group-item">Статус пользователя: {{user.status}}</li>
                {% if user.vk_id%}
                    <li class="list-group-item">VK id: {{user.vk_id}}</li>
                {% endif %}
            </ul>
        </div>
    </div>
    <div class="col-7">
        {% for item in news%}
        <div class="col-md6 border rounded">

            <h2>{{item.title}}</h2>
            <div>
                {{item.content}}
            </div>
            <div>
                Автор - {{item.user.name}}, Дата написания - {{item.created_date}}
            </div>
            {% if current_user.id %}
                <div>
                    <a href="/create_comment/{{item.id}}/{{user.id}}" class="btn btn-primary">Комментировать</a>
                </div>
            {% endif %}
            <h3>Комментарии</h3>
            {% for comment in comments %}
            {% if comment.news_id == item.id %}
                <div class="media">
                    <img src="{{comment.user.avatar}}" class="mr-3" alt="Аватар" height="64px">
                    <div class="media-body">
                        <h5 class="mt-0"><a href="/profile/{{comment.user_id}}">
                            {{comment.user.name}}
                            {% if comment.user.status == "admin" %}
                                <span class="badge badge-warning">Модератор</span>
                            {% elif comment.user.status == "develop" %}
                                <span class="badge badge-danger">Разработчик</span>
                            {% endif %}
                        </a></h5>
                        {{comment.content}}
                    </div>
                </div>
            {% endif %}
            {% endfor %}
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}